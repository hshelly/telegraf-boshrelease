name: c-telegraf-deployment

releases:
- name: c-telegraf
  sha1: 0aec1853013aa720cca9ca41ac122706c5e61598a5a7d87e9c87a0bdcc72d5b8
  version: 10
  url: https://github.com/hshelly/telegraf-boshrelease/blob/master/src/telegraf/telegraf-1.24.1_linux_amd64.tar.gz

stemcells:
- alias: default
  os: ubuntu-xenial
  version: latest

instance_groups:
- name: telegraf-system
  instances: 1
  azs: [us-central1-f]
  jobs: 
   - name: telegraf-system
     release: c-telegraf
     properties:
       telegraf:
         metric_buffer_limit: 10000
         flush_interval: "15s"
         flush_jitter: "0s"
         data_collection_interval: "60s"         
         elasticsearch:
           servers: [ "http://10.0.0.7:9200" ]
           http_timeout: "5s"
           local: true
           cluster_health: false
           cluster_health_level: "indices"
           cluster_stats: true
           cluster_stats_only_from_master: true
           indices_level: "shards"
           insecure_skip_verify: true
  vm_type: small
  stemcell: default
  networks:
  - name: oroville-management-subnet

update:
  canaries: 1
  max_in_flight: 10
  canary_watch_time: 1000-30000
  update_watch_time: 1000-30000
